!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!y[e]||!R[e])return;for(var n in R[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===T&&w()}(e,n),t&&t(e,n)};var n,r=!0,i="d99c18d873755ab880c6",a=1e4,s={},o=[],l=[];function c(e){var t=_[e];if(!t)return L;var r=function(r){return t.hot.active?(_[r]?-1===_[r].parents.indexOf(e)&&_[r].parents.push(e):(o=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),o=[]),L(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return L[e]},set:function(t){L[e]=t}}};for(var a in L)Object.prototype.hasOwnProperty.call(L,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,i(a));return r.e=function(e){return"ready"===p&&h("prepare"),T++,L.e(e).then(t,function(e){throw t(),e});function t(){T--,"prepare"===p&&(g[e]||S(e),0===T&&0===v&&w())}},r.t=function(e,t){return 1&t&&(e=r(e)),L.t(e,-2&t)},r}function u(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:H,apply:x,status:function(e){if(!e)return p;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:s[e]};return n=void 0,t}var d=[],p="idle";function h(e){p=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}var f,m,E,v=0,T=0,g={},R={},y={};function M(e){return+e+""===e?+e:e}function H(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=a,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=L.p+""+i+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;R={},g={},y=e.c,E=e.h,h("prepare");var t=new Promise(function(e,t){f={resolve:e,reject:t}});m={};return S(0),"prepare"===p&&0===T&&0===v&&w(),t});var t}function S(e){y[e]?(R[e]=!0,v++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=L.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function w(){h("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then(function(){return x(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(M(n));e.resolve(t)}}function x(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var n,r,a,l,c;function u(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),a=i.id,s=i.chain;if((l=_[a])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(l.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var o=0;o<l.parents.length;o++){var c=l.parents[o],u=_[c];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([c]),moduleId:a,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[a]?(n[c]||(n[c]=[]),d(n[c],[a])):(delete n[c],t.push(c),r.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var f={},v=[],T={},g=function(){console.warn("[HMR] unexpected require("+H.moduleId+") to disposed module")};for(var R in m)if(Object.prototype.hasOwnProperty.call(m,R)){var H;c=M(R);var S=!1,w=!1,x=!1,b="";switch((H=m[R]?u(c):{type:"disposed",moduleId:R}).chain&&(b="\nUpdate propagation: "+H.chain.join(" -> ")),H.type){case"self-declined":t.onDeclined&&t.onDeclined(H),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+H.moduleId+b));break;case"declined":t.onDeclined&&t.onDeclined(H),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+H.moduleId+" in "+H.parentId+b));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(H),t.ignoreUnaccepted||(S=new Error("Aborted because "+c+" is not accepted"+b));break;case"accepted":t.onAccepted&&t.onAccepted(H),w=!0;break;case"disposed":t.onDisposed&&t.onDisposed(H),x=!0;break;default:throw new Error("Unexception type "+H.type)}if(S)return h("abort"),Promise.reject(S);if(w)for(c in T[c]=m[c],d(v,H.outdatedModules),H.outdatedDependencies)Object.prototype.hasOwnProperty.call(H.outdatedDependencies,c)&&(f[c]||(f[c]=[]),d(f[c],H.outdatedDependencies[c]));x&&(d(v,[H.moduleId]),T[c]=g)}var A,O=[];for(r=0;r<v.length;r++)c=v[r],_[c]&&_[c].hot._selfAccepted&&O.push({module:c,errorHandler:_[c].hot._selfAccepted});h("dispose"),Object.keys(y).forEach(function(e){!1===y[e]&&function(e){delete installedChunks[e]}(e)});for(var F,I,D=v.slice();D.length>0;)if(c=D.pop(),l=_[c]){var G={},P=l.hot._disposeHandlers;for(a=0;a<P.length;a++)(n=P[a])(G);for(s[c]=G,l.hot.active=!1,delete _[c],delete f[c],a=0;a<l.children.length;a++){var U=_[l.children[a]];U&&((A=U.parents.indexOf(c))>=0&&U.parents.splice(A,1))}}for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(l=_[c]))for(I=f[c],a=0;a<I.length;a++)F=I[a],(A=l.children.indexOf(F))>=0&&l.children.splice(A,1);for(c in h("apply"),i=E,T)Object.prototype.hasOwnProperty.call(T,c)&&(e[c]=T[c]);var j=null;for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(l=_[c])){I=f[c];var C=[];for(r=0;r<I.length;r++)if(F=I[r],n=l.hot._acceptedDependencies[F]){if(-1!==C.indexOf(n))continue;C.push(n)}for(r=0;r<C.length;r++){n=C[r];try{n(I)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:c,dependencyId:I[r],error:e}),t.ignoreErrored||j||(j=e)}}}for(r=0;r<O.length;r++){var B=O[r];c=B.module,o=[c];try{L(c)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:n,originalError:e}),t.ignoreErrored||j||(j=n),j||(j=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:c,error:e}),t.ignoreErrored||j||(j=e)}}return j?(h("fail"),Promise.reject(j)):(h("idle"),new Promise(function(e){e(v)}))}var _={};function L(t){if(_[t])return _[t].exports;var n=_[t]={i:t,l:!1,exports:{},hot:u(t),parents:(l=o,o=[],l),children:[]};return e[t].call(n.exports,n,n.exports,c(t)),n.l=!0,n.exports}L.m=e,L.c=_,L.d=function(e,t,n){L.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},L.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},L.t=function(e,t){if(1&t&&(e=L(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(L.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)L.d(n,r,function(t){return e[t]}.bind(null,r));return n},L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,"a",t),t},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},L.p="air3djs/",L.h=function(){return i},c(4)(L.s=4)}([function(e,t,n){"use strict";function r(e,t,n){this._x=e||0,this._y=t||0,this._z=n||0,this.set=function(e,t,n){this._x=e||0,this._y=t||0,void 0!==n&&(this._z=n)},this.setPoint=function(e){this._x=e.x,this._y=e.y,void 0!==e.z&&(this._z=e.z)},this.getObj=function(){var e={};return e.x=this._x,e.y=this._y,e.z=this._z,e},this.copy=function(){return new r(this._x,this._y,this._z)}}function i(e,t,n,r){this._x=e||0,this._y=t||0,this._z="function"!=typeof n&&n||0,this.fun="function"==typeof n?n:r,this.set=function(e,t,n){this._x=e||0,this._y=t||0,this._z=n||0,this.fun&&this.fun()},this.setPoint=function(e){this._x=e.x,this._y=e.y,this._z=e.z,this.fun&&this.fun()},this.getObj=function(){var e={};return e.x=this._x,e.y=this._y,e.z=this._z,e},this.copy=function(){return new i(this._x,this._y,this._z)}}n.d(t,"a",function(){return i}),r.prototype={set x(e){this._x=e},get x(){return this._x},set y(e){this._y=e},get y(){return this._y},set z(e){this._z=e},get z(){return this._z}},i.prototype={set x(e){this._x=e,this.fun&&this.fun()},get x(){return this._x},set y(e){this._y=e,this.fun&&this.fun()},get y(){return this._y},set z(e){this._z=e,this.fun&&this.fun()},get z(){return this._z}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3);var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="Main",this.fun=t;var n=this;this.glaf=null,this._width=100,this._height=100,n.resolution=1,n.objectBase=null,n.confText=null,this.debug=!1,this.contentHTML=document.createElement("div"),this.contentHTML.style.position="fixed",this.contentHTML.style.top="0px",this.contentHTML.style.left="0px",document.body.appendChild(this.contentHTML),this.start=function(){this.fina(),this.tick()},this.fina=function(){n.glaf=new r.a(n),sizeWindow(),t("init")};var i,a=!0;this.tick=function(){1==(a=!a)&&n.glaf&&n.glaf.update(),requestAnimationFrame(n.tick)},this.scale=1,this.sizeWindow=function(e,t){n._width=e,n._height=t,n._width<800&&(n._width=800),n._height<600&&(n._height=600),(i=e/n._width)>t/n._height&&(i=t/n._height),this.scale=i,1==dcmParam.isIE&&(this.scale=1),n.glaf&&n.glaf.sizeWindow(e,t,this.scale)},this.start()}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});n(5),n(6),n(7),n(8),n(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function t(n){var i=this;r(this,t),this.type="Glaf";var s=this;this.mobile=dcmParam.mobile,this.dCont=void 0,this.main=n,this.par=n,this.debug=!0,this.texLoader=new THREE.TextureLoader,this.gltfLoader=new THREE.GLTFLoader,this.resources="./air3djs/resources/",this.texLoader=new THREE.TextureLoader,this.gltfLoader=new THREE.GLTFLoader,this.resources="./air3djs/resources/",this.content3d=new THREE.Object3D,this.visi3D=new MVisi3D(n.contentHTML,null,dcmParam.mobile,!0,!1,!0,!0),this.visi3D.yes3d=!0,this.visi3D.groupObject.add(this.content3d),this.visi3D.alwaysRender=!0,this.visi3D.fun_rotationZ=function(){};var o=void 0,l=void 0;this.touchmove=function(e){e.preventDefault(),e.target===s.visi3D.position3d.div&&o(e),l(e),e.stopPropagation()},1==dcmParam.mobile&&(o=this.visi3D.getFunMouseMove(),l=e.dcmParam.getFunMouseMove(),window.addEventListener("touchmove",s.touchmove,{passive:!1,capture:!0}));var c=new a(this,"videoplayback.webm");this.gltfLoader.load(this.resources+"home.glb",function(e){c.setDDD(e.scene),e.scene.rotation.x=-Math.PI/2,i.content3d.add(e.scene),e.scene.children[0].name="sphereBase",i.visi3D.addChildMouse(e.scene.children[0]),trace(e.scene)});var u=new THREE.Object3D;u.add(new THREE.AxesHelper(280)),this.content3d.add(u),this.update=function(){this.visi3D.upDate(),c.update()},this.sizeWindow=function(e,t,n){this.scale=n,this.visi3D.sizeWindow(0,0,e,t)}},a=function e(t,n){r(this,e),this.type="MatetialVideo";var i=this,a=document.getElementById("video");a.src=n,a.preload="auto",a.autoload=!0,trace(">>>>>>>>>.",n);var s,o=new THREE.VideoTexture(a);o.minFilter=THREE.LinearFilter,o.magFilter=THREE.LinearFilter,o.format=THREE.RGBFormat,this.material=new THREE.MeshPhongMaterial({color:16777215,map:o}),this.getObj=function(e,t){if(e.material&&(e.material=i.material,e.material.name.indexOf(t)),e.children)for(var n=0;n<e.children.length;n++)this.getObj(e.children[n],t);return null},this.update=function(){},this.mousedown=function(e){i.getObj(s,"mat02_"),a.play(),0==dcmParam.mobile?document.removeEventListener("mousedown",i.mousedown):document.removeEventListener("touchstart",i.mousedown)},this.setDDD=function(e){s=e,0==dcmParam.mobile?document.addEventListener("mousedown",i.mousedown):document.addEventListener("touchstart",i.mousedown)}}}).call(this,n(2))},function(e,t,n){"use strict";n.r(t),function(e){var r=n(1);n.d(t,"Main",function(){return r.a}),e.Main=r.a}.call(this,n(2))},function(e,t,n){"use strict"},function(e,t){THREE.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"Anonymous",load:function(e,t,n,r){var i=this,a=void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(e),s=new THREE.FileLoader(i.manager);s.setResponseType("arraybuffer"),s.load(e,function(e){try{i.parse(e,a,t,r)}catch(e){if(void 0===r)throw e;r(e)}},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},parse:function(e,t,s,o){var u,d={};if("string"==typeof e)u=e;else if(THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4))===a){try{d[n.KHR_BINARY_GLTF]=new l(e)}catch(e){return void(o&&o(e))}u=d[n.KHR_BINARY_GLTF].content}else u=THREE.LoaderUtils.decodeText(new Uint8Array(e));var p=JSON.parse(u);void 0===p.asset||p.asset.version[0]<2?o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")):(p.extensionsUsed&&(p.extensionsUsed.indexOf(n.KHR_LIGHTS)>=0&&(d[n.KHR_LIGHTS]=new r(p)),p.extensionsUsed.indexOf(n.KHR_MATERIALS_COMMON)>=0&&(d[n.KHR_MATERIALS_COMMON]=new i(p)),p.extensionsUsed.indexOf(n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0&&(d[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new c)),console.time("GLTFLoader"),new F(p,d,{path:t||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(function(e,t,n,r,i){console.timeEnd("GLTFLoader"),s({scene:e,scenes:t,cameras:n,animations:r,asset:i})},o))}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};function r(e){this.name=n.KHR_LIGHTS,this.lights={};var t=(e.extensions&&e.extensions[n.KHR_LIGHTS]||{}).lights||{};for(var r in t){var i,a=t[r],s=(new THREE.Color).fromArray(a.color);switch(a.type){case"directional":(i=new THREE.DirectionalLight(s)).position.set(0,0,1);break;case"point":i=new THREE.PointLight(s);break;case"spot":(i=new THREE.SpotLight(s)).position.set(0,0,1);break;case"ambient":i=new THREE.AmbientLight(s)}i&&(void 0!==a.constantAttenuation&&(i.intensity=a.constantAttenuation),void 0!==a.linearAttenuation&&(i.distance=1/a.linearAttenuation),void 0!==a.quadraticAttenuation&&(i.decay=a.quadraticAttenuation),void 0!==a.fallOffAngle&&(i.angle=a.fallOffAngle),void 0!==a.fallOffExponent&&console.warn("THREE.GLTFLoader:: light.fallOffExponent not currently supported."),i.name=a.name||"light_"+r,this.lights[r]=i)}}function i(e){this.name=n.KHR_MATERIALS_COMMON}i.prototype.getMaterialType=function(e){switch(e.extensions[this.name].type){case"commonBlinn":case"commonPhong":return THREE.MeshPhongMaterial;case"commonLambert":return THREE.MeshLambertMaterial;case"commonConstant":default:return THREE.MeshBasicMaterial}},i.prototype.extendParams=function(e,t,n){var r=t.extensions[this.name],i=[],a=[];switch(r.type){case"commonBlinn":case"commonPhong":a.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case"commonLambert":a.push("diffuseFactor","diffuseTexture")}var s={};return a.forEach(function(e){void 0!==r[e]&&(s[e]=r[e])}),void 0!==s.diffuseFactor&&(e.color=(new THREE.Color).fromArray(s.diffuseFactor),e.opacity=s.diffuseFactor[3]),void 0!==s.diffuseTexture&&i.push(n.assignTexture(e,"map",s.diffuseTexture.index)),void 0!==s.specularFactor&&(e.specular=(new THREE.Color).fromArray(s.specularFactor)),void 0!==s.specularTexture&&i.push(n.assignTexture(e,"specularMap",s.specularTexture.index)),void 0!==s.shininessFactor&&(e.shininess=s.shininessFactor),Promise.all(i)};var a="glTF",s=12,o={JSON:1313821514,BIN:5130562};function l(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,s);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(e,s),i=0;i<r.byteLength;){var l=r.getUint32(i,!0);i+=4;var c=r.getUint32(i,!0);if(i+=4,c===o.JSON){var u=new Uint8Array(e,s+i,l);this.content=THREE.LoaderUtils.decodeText(u)}else if(c===o.BIN){var d=s+i;this.body=e.slice(d,d+l)}i+=l}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function c(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,n){var r=t.extensions[this.name],i=THREE.ShaderLib.standard,a=THREE.UniformsUtils.clone(i.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=i.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",u);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new THREE.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=d,e.uniforms=a,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var p=[];if(Array.isArray(r.diffuseFactor)){var h=r.diffuseFactor;e.color.fromArray(h),e.opacity=h[3]}if(void 0!==r.diffuseTexture&&p.push(n.assignTexture(e,"map",r.diffuseTexture.index)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var f=r.specularGlossinessTexture.index;p.push(n.assignTexture(e,"glossinessMap",f)),p.push(n.assignTexture(e,"specularMap",f))}return Promise.all(p)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++)t[n[r]]=e[n[r]];return t},refreshUniforms:function(e,t,n,r,i,a){var s,o,l,c=i.uniforms,u=i.defines;if(c.opacity.value=i.opacity,c.diffuse.value.copy(i.color),c.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),c.map.value=i.map,c.specularMap.value=i.specularMap,c.alphaMap.value=i.alphaMap,c.lightMap.value=i.lightMap,c.lightMapIntensity.value=i.lightMapIntensity,c.aoMap.value=i.aoMap,c.aoMapIntensity.value=i.aoMapIntensity,i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.glossinessMap?s=i.glossinessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap&&(s=i.emissiveMap),void 0!==s)if(s.isWebGLRenderTarget&&(s=s.texture),void 0!==s.matrix){if(!0===s.matrixAutoUpdate){o=s.offset,l=s.repeat;var d=s.rotation,p=s.center;s.matrix.setUvTransform(o.x,o.y,l.x,l.y,d,p.x,p.y)}c.uvTransform.value.copy(s.matrix)}else o=s.offset,l=s.repeat,c.offsetRepeat.value.set(o.x,o.y,l.x,l.y);c.envMap.value=i.envMap,c.envMapIntensity.value=i.envMapIntensity,c.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1,c.refractionRatio.value=i.refractionRatio,c.specular.value.copy(i.specular),c.glossiness.value=i.glossiness,c.glossinessMap.value=i.glossinessMap,c.emissiveMap.value=i.emissiveMap,c.bumpMap.value=i.bumpMap,c.normalMap.value=i.normalMap,c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias,null!==c.glossinessMap.value&&void 0===u.USE_GLOSSINESSMAP&&(u.USE_GLOSSINESSMAP="",u.USE_ROUGHNESSMAP=""),null===c.glossinessMap.value&&void 0!==u.USE_GLOSSINESSMAP&&(delete u.USE_GLOSSINESSMAP,delete u.USE_ROUGHNESSMAP)}}}var u=0,d=1,p=2,h=3,f=4,m=5,E=6,v=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),T={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},g={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},R={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},y={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},M=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),H={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S={CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},w="OPAQUE",x="MASK",_="BLEND";function L(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function b(e,t,n,r){var i=e.geometry,a=e.material,s=n.targets,o=i.morphAttributes;o.position=[],o.normal=[],a.morphTargets=!0;for(var l=0,c=s.length;l<c;l++){var u,d,p=s[l],h="morphTarget"+l;if(void 0!==p.POSITION){u=r[p.POSITION].clone();for(var f=i.attributes.position,m=0,E=u.count;m<E;m++)u.setXYZ(m,u.getX(m)+f.getX(m),u.getY(m)+f.getY(m),u.getZ(m)+f.getZ(m))}else i.attributes.position&&(u=i.attributes.position.clone());if(void 0!==u&&(u.name=h,o.position.push(u)),void 0!==p.NORMAL){a.morphNormals=!0,d=r[p.NORMAL].clone();var v=i.attributes.normal;for(m=0,E=d.count;m<E;m++)d.setXYZ(m,d.getX(m)+v.getX(m),d.getY(m)+v.getY(m),d.getZ(m)+v.getZ(m))}else void 0!==i.attributes.normal&&(d=i.attributes.normal.clone());void 0!==d&&(d.name=h,o.normal.push(d))}if(e.updateMorphTargets(),void 0!==t.weights)for(l=0,c=t.weights.length;l<c;l++)e.morphTargetInfluences[l]=t.weights[l]}function A(e,t){if(e.indices!==t.indices)return!1;var n=e.attributes||{},r=t.attributes||{},i=Object.keys(n),a=Object.keys(r);if(i.length!==a.length)return!1;for(var s=0,o=i.length;s<o;s++){var l=i[s];if(n[l]!==r[l])return!1}return!0}function O(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(A(i.primitive,t))return i.geometry}return null}function F(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.primitiveCache=[],this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}return F.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var r=t.scenes||[],i=r[n.scene||0],a=t.animations||[],s=n.asset,o=t.cameras||[];e(i,r,o,a,s)}).catch(t)},F.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},a=0,s=t.length;a<s;a++)for(var o=t[a].joints,l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0;for(var u=0,d=e.length;u<d;u++){var p=e[u];void 0!==p.mesh&&(void 0===r[p.mesh]&&(r[p.mesh]=i[p.mesh]=0),r[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},F.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);r||(r=this["load"+e.charAt(0).toUpperCase()+e.slice(1)](t),this.cache.add(n,r));return r},F.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t},F.prototype.getMultiDependencies=function(e){for(var t={},n=[],r=0,i=e.length;r<i;r++){var a=e[r],s=this.getDependencies(a);s=s.then(function(e,n){t[e]=n}.bind(this,a+("mesh"===a?"es":"s"))),n.push(s)}return Promise.all(n).then(function(){return t})},F.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,n){r.load(L(t.uri,i.path),e,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},F.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})},F.prototype.loadAccessor=function(e){var t=this.json,n=this.json.accessors[e],r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then(function(e){var r,i,a=e[0],s=M[n.type],o=v[n.componentType],l=o.BYTES_PER_ELEMENT,c=l*s,u=t.bufferViews[n.bufferView].byteStride,d=!0===n.normalized;if(u&&u!==c){r=new o(a);var p=new THREE.InterleavedBuffer(r,u/l);i=new THREE.InterleavedBufferAttribute(p,s,n.byteOffset/l,d)}else r=null===a?new o(n.count*s):new o(a,n.byteOffset,n.count*s),i=new THREE.BufferAttribute(r,s,d);if(void 0!==n.sparse){var h=M.SCALAR,f=v[n.sparse.indices.componentType],m=n.sparse.indices.byteOffset||0,E=n.sparse.values.byteOffset||0,T=new f(e[1],m,n.sparse.count*h),g=new o(e[2],E,n.sparse.count*s);null!==a&&i.setArray(i.array.slice());for(var R=0,y=T.length;R<y;R++){var H=T[R];if(i.setX(H,g[R*s]),s>=2&&i.setY(H,g[R*s+1]),s>=3&&i.setZ(H,g[R*s+2]),s>=4&&i.setW(H,g[R*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},F.prototype.loadTexture=function(e){var t=this.json,n=this.options,r=this.textureLoader,i=window.URL||window.webkitURL,a=t.textures[e],s=t.images[a.source],o=s.uri,l=!1;return void 0!==s.bufferView&&(o=this.getDependency("bufferView",s.bufferView).then(function(e){l=!0;var t=new Blob([e],{type:s.mimeType});return o=i.createObjectURL(t)})),Promise.resolve(o).then(function(e){var t=THREE.Loader.Handlers.get(e)||r;return new Promise(function(r,i){t.load(L(e,n.path),r,void 0,i)})}).then(function(e){!0===l&&i.revokeObjectURL(o),e.flipY=!1,void 0!==a.name&&(e.name=a.name),e.format=void 0!==a.format?R[a.format]:THREE.RGBAFormat,void 0!==a.internalFormat&&e.format!==R[a.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==a.type?y[a.type]:THREE.UnsignedByteType;var n=(t.samplers||{})[a.sampler]||{};return e.magFilter=T[n.magFilter]||THREE.LinearFilter,e.minFilter=T[n.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=g[n.wrapS]||THREE.RepeatWrapping,e.wrapT=g[n.wrapT]||THREE.RepeatWrapping,e})},F.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then(function(n){e[t]=n})},F.prototype.loadMaterial=function(e){this.json;var t,r=this.extensions,i=this.json.materials[e],a={},s=i.extensions||{},o=[];if(s[n.KHR_MATERIALS_COMMON]){var l=r[n.KHR_MATERIALS_COMMON];t=l.getMaterialType(i),o.push(l.extendParams(a,i,this))}else if(s[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(i),o.push(c.extendParams(a,i,this))}else if(void 0!==i.pbrMetallicRoughness){t=THREE.MeshStandardMaterial;var u=i.pbrMetallicRoughness;if(a.color=new THREE.Color(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){var d=u.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}if(void 0!==u.baseColorTexture&&o.push(this.assignTexture(a,"map",u.baseColorTexture.index)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture){var p=u.metallicRoughnessTexture.index;o.push(this.assignTexture(a,"metalnessMap",p)),o.push(this.assignTexture(a,"roughnessMap",p))}}else t=THREE.MeshPhongMaterial;!0===i.doubleSided&&(a.side=THREE.DoubleSide);var h=i.alphaMode||w;return h===_?a.transparent=!0:(a.transparent=!1,h===x&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&(o.push(this.assignTexture(a,"normalMap",i.normalTexture.index)),a.normalScale=new THREE.Vector2(1,1),void 0!==i.normalTexture.scale&&a.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&(o.push(this.assignTexture(a,"aoMap",i.occlusionTexture.index)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&(t===THREE.MeshBasicMaterial?a.color=(new THREE.Color).fromArray(i.emissiveFactor):a.emissive=(new THREE.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&(t===THREE.MeshBasicMaterial?o.push(this.assignTexture(a,"map",i.emissiveTexture.index)):o.push(this.assignTexture(a,"emissiveMap",i.emissiveTexture.index))),Promise.all(o).then(function(){var e;return e=t===THREE.ShaderMaterial?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),void 0!==i.name&&(e.name=i.name),e.normalScale&&(e.normalScale.x=-e.normalScale.x),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),i.extras&&(e.userData=i.extras),e})},F.prototype.loadGeometries=function(e){var t=this.primitiveCache;return this.getDependencies("accessor").then(function(n){for(var r=[],i=0,a=e.length;i<a;i++){var s=e[i],o=O(t,s);if(o)r.push(o);else{var l=new THREE.BufferGeometry,c=s.attributes;for(var u in c){var d=n[c[u]];switch(u){case"POSITION":l.addAttribute("position",d);break;case"NORMAL":l.addAttribute("normal",d);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":l.addAttribute("uv",d);break;case"TEXCOORD_1":l.addAttribute("uv2",d);break;case"COLOR_0":case"COLOR0":case"COLOR":l.addAttribute("color",d);break;case"WEIGHTS_0":case"WEIGHT":l.addAttribute("skinWeight",d);break;case"JOINTS_0":case"JOINT":l.addAttribute("skinIndex",d)}}void 0!==s.indices&&l.setIndex(n[s.indices]),t.push({primitive:s,geometry:l}),r.push(l)}}return r})},F.prototype.loadMesh=function(e){var t=this,r=(this.json,this.extensions),i=this.json.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(a){var s=new THREE.Group,o=i.primitives;return t.loadGeometries(o).then(function(t){for(var l=0,c=o.length;l<c;l++){var v=o[l],T=t[l],g=void 0===v.material?new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):a.materials[v.material];g.aoMap&&void 0===T.attributes.uv2&&void 0!==T.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),T.addAttribute("uv2",new THREE.BufferAttribute(T.attributes.uv.array,2)));var R,y=void 0!==T.attributes.color,M=void 0===T.attributes.normal,H=!0===i.isSkinnedMesh,S=void 0!==v.targets;if(y||M||H||S)if(g.isGLTFSpecularGlossinessMaterial)g=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(g);else g=g.clone();if(y&&(g.vertexColors=THREE.VertexColors,g.needsUpdate=!0),M&&(g.flatShading=!0),v.mode===f||v.mode===m||v.mode===E||void 0===v.mode)H?(R=new THREE.SkinnedMesh(T,g),g.skinning=!0):R=new THREE.Mesh(T,g),v.mode===m?R.drawMode=THREE.TriangleStripDrawMode:v.mode===E&&(R.drawMode=THREE.TriangleFanDrawMode);else if(v.mode===d)R=new THREE.LineSegments(T,g);else if(v.mode===h)R=new THREE.Line(T,g);else if(v.mode===p)R=new THREE.LineLoop(T,g);else{if(v.mode!==u)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);R=new THREE.Points(T,g)}if(R.name=i.name||"mesh_"+e,S&&b(R,i,v,a.accessors),void 0!==i.extras&&(R.userData=i.extras),void 0!==v.extras&&(R.geometry.userData=v.extras),!0===g.isGLTFSpecularGlossinessMaterial&&(R.onBeforeRender=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),!(o.length>1))return R;R.name+="_"+l,s.add(R)}return s})})},F.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r){if("perspective"===n.type){var i=r.aspectRatio||1,a=r.yfov*i;t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(a),i,r.znear||1,r.zfar||2e6)}else"orthographic"===n.type&&(t=new THREE.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar));return void 0!==n.name&&(t.name=n.name),n.extras&&(t.userData=n.extras),Promise.resolve(t)}console.warn("THREE.GLTFLoader: Missing camera parameters.")},F.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},F.prototype.loadAnimation=function(e){this.json;var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(n){for(var r=[],i=0,a=t.channels.length;i<a;i++){var s=t.channels[i],o=t.samplers[s.sampler];if(o){var l=s.target,c=void 0!==l.node?l.node:l.id,u=void 0!==t.parameters?t.parameters[o.input]:o.input,d=void 0!==t.parameters?t.parameters[o.output]:o.output,p=n.accessors[u],h=n.accessors[d],f=n.nodes[c];if(f){var m;switch(f.updateMatrix(),f.matrixAutoUpdate=!0,H[l.path]){case H.weights:m=THREE.NumberKeyframeTrack;break;case H.rotation:m=THREE.QuaternionKeyframeTrack;break;case H.position:case H.scale:default:m=THREE.VectorKeyframeTrack}var E=f.name?f.name:f.uuid;if("CUBICSPLINE"===o.interpolation){for(var v=h.itemSize,T=new(0,h.array.constructor)(h.count*v/3),g=0,R=h.count;g<R;g+=3)T[g*v/3]=h.getX(g+1),v>1&&(T[g*v/3+1]=h.getY(g+1)),v>2&&(T[g*v/3+2]=h.getZ(g+1)),v>3&&(T[g*v/3+3]=h.getW(g+1));h=new THREE.BufferAttribute(T,v/3,h.normalized)}var y=void 0!==o.interpolation?S[o.interpolation]:THREE.InterpolateLinear,M=[];H[l.path]===H.weights?f.traverse(function(e){!0===e.isMesh&&!0===e.material.morphTargets&&M.push(e.name?e.name:e.uuid)}):M.push(E);for(g=0,R=M.length;g<R;g++)r.push(new m(M[g]+"."+H[l.path],THREE.AnimationUtils.arraySlice(p.array,0),THREE.AnimationUtils.arraySlice(h.array,0),y))}}}c=void 0!==t.name?t.name:"animation_"+e;return new THREE.AnimationClip(c,void 0,r)})},F.prototype.loadNode=function(e){this.json;var t=this.extensions,r=this.json.meshReferences,i=this.json.meshUses,a=this.json.nodes[e];return this.getMultiDependencies(["mesh","skin","camera"]).then(function(e){var s;if(!0===a.isBone)s=new THREE.Bone;else if(void 0!==a.mesh){var o=e.meshes[a.mesh];if(s=o.clone(),!0===o.isGroup)for(var l=0,c=o.children.length;l<c;l++){var u=o.children[l];u.material&&!0===u.material.isGLTFSpecularGlossinessMaterial&&(s.children[l].onBeforeRender=u.onBeforeRender)}else o.material&&!0===o.material.isGLTFSpecularGlossinessMaterial&&(s.onBeforeRender=o.onBeforeRender);r[a.mesh]>1&&(s.name+="_instance_"+i[a.mesh]++)}else if(void 0!==a.camera)s=e.cameras[a.camera];else if(a.extensions&&a.extensions[n.KHR_LIGHTS]&&void 0!==a.extensions[n.KHR_LIGHTS].light){s=t[n.KHR_LIGHTS].lights[a.extensions[n.KHR_LIGHTS].light]}else s=new THREE.Object3D;if(void 0!==a.name&&(s.name=THREE.PropertyBinding.sanitizeNodeName(a.name)),a.extras&&(s.userData=a.extras),void 0!==a.matrix){var d=new THREE.Matrix4;d.fromArray(a.matrix),s.applyMatrix(d)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return s})},F.prototype.loadScene=function(){function e(t,n,r,i,a){var s=i[t],o=r.nodes[t];if(void 0!==o.skin)for(var l=!0===s.isGroup?s.children:[s],c=0,u=l.length;c<u;c++){for(var d=l[c],p=a[o.skin],h=[],f=[],m=0,E=p.joints.length;m<E;m++){var v=p.joints[m],T=i[v];if(T){h.push(T);var g=new THREE.Matrix4;void 0!==p.inverseBindMatrices&&g.fromArray(p.inverseBindMatrices.array,16*m),f.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',v)}d.bind(new THREE.Skeleton(h,f),d.matrixWorld)}if(n.add(s),o.children){var R=o.children;for(c=0,u=R.length;c<u;c++){e(R[c],s,r,i,a)}}}return function(t){var r=this.json,i=this.extensions,a=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var s=new THREE.Scene;void 0!==a.name&&(s.name=a.name),a.extras&&(s.userData=a.extras);for(var o=a.nodes||[],l=0,c=o.length;l<c;l++)e(o[l],s,r,t.nodes,t.skins);if(a.extensions&&a.extensions[n.KHR_LIGHTS]&&void 0!==a.extensions[n.KHR_LIGHTS].light){var u=i[n.KHR_LIGHTS].lights;s.add(u[a.extensions[n.KHR_LIGHTS].light])}return s})}}(),e}()},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict"}]);